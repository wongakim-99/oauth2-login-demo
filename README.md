# oauth2-login-demo

## 1. Overview

서비스 개발 시, ID와 Password를 활용한 기본 로그인 외에도 SNS 소셜 로그인을 제공하는 경우가 많습니다. 대표적으로 구글 소셜 로그인뿐만 아니라, 국내에서는 네이버와 카카오 로그인이 널리 사용되고 있습니다.
저 또한 2024년 2학기에 진행된 학교 소프트웨어 프로젝트에서 구글 소셜 로그인을 통해 서비스를 개발한 경험이 있습니다. 그러나 당시에는 데드라인에 쫓기고 처음 진행하는 프로젝트였던 탓에, 원리를 제대로 이해하지 못한 채 기능만 동작하도록 급하게 코드를 작성한 부분이 많았습니다.

이번 레포지토리를 통해 Spring Security, JWT Token, 인가 코드 등 소셜 로그인과 관련된 기능들을 한층 더 깊게 이해하고, 체계적으로 정리하는 것을 목표로 하고 있습니다.

또한, 단순히 백엔드 코드만 작성하는 것이 아니라, 클라이언트가 소셜 로그인 데이터를 어떻게 받아서 처리하는지에 대한 과정도 함께 다룰 예정입니다.

이 레포지토리에서는 Spring Boot 환경에서 네이버와 카카오 로그인을 지원하는 기능을 구현합니다.

본 README 파일에서는 OAuth2.0에 대한 간단한 설명을 다루며, 실제 구현 코드는 이슈를 통해 상세히 다룰 예정입니다.

---

## 2. OAuth 2.0 이란?

OAuth 2.0을 간단하게 설명하면 어떤 서비스를 만들 때 사용자 개인정보와 인증에 대한 책임을 지지 않고 신뢰할 만한 타사 플랫폼에 위임하는 겁니다.

개인정보 관련 데이터를 직접 보관하는 것은 리스크가 큽니다.

보안적으로 문제되지 않도록 안전하게 관리해야 하고 ID/PW 에 관련된 지속적인 해킹 공격 등 여러 가지 신경써야 할 부분이 많습니다.

하지만 OAuth 2.0 을 사용해 신뢰할 수 있는 플랫폼(구글, 페이스북, 네이버, 카카오 등) 에 개인정보, 인증 기능을 맡기면 서비스는 인증 기능에 대한 부담을 줄일 수 있습니다.

---

## 3. OAuth 2.0 역할

OAuth 2.0을 구성하는 4가지 역할은 다음과 같습니다.
- 리소스 소유자(Resource Owner) : OAuth 2.0 프로토콜을 사용하여 보호되는 리소스에 대한 액세스 권한을 부여하는 사용자(엔티티)입니다. 클라이언트를 인증(Authorize)하는 역할을 수행합니다. 예를 들어 네이버 로그인에서 네이버 아이디를 소유하고 third-party 애플리케이션(클라이언트)에 네이버 아이디로 **소셜 로그인 인증을 하는 사용자를 의미합니다**.

<br/>

- 클라이언트(Client) : OAuth 2.0을 사용하여 리소스에 접근하려는 third-party 애플리케이션이나 서비스입니다. 즉, 사용자 데이터를 접근하려는 **앱 또는 서비스입니다.**

<br/>

- 권한 서버(Authorization Server): 권한 서버는 클라이언트가 리소스 소유자의 권한을 얻을 수 있도록 도와주는 서버입니다. 권한 서버는 사용자 인증, 권한 부여 및 토큰 발급을 관리합니다.
  - 권한 서버의 예시 :
     - 구글 계정을 통해 로그인하면, 구글의 권한 서버가 사용자를 인증하고 클라이언트(예: 특정 앱)에게 액세스 토큰을 발급합니다.
     - 카카오 로그인을 사용할 때, 카카오의 권한 서버가 인증을 담당합니다.
     - 네이버 로그인 시, 네이버 권한 서버가 사용자 정보를 인증하고, 클라이언트에게 사용자의 이메일이나 프로필 데이터를 요청할 수 있는 액세스 토큰을 발급합니다.
  - 권한 서버의 주요 역활 :
     - 사용자 인증 : 권한 서버는 리소스 소유자(사용자)가 누구인지 확인합니다. 예를들어, 사용자가 구글 계정을 입력하고 비밀번호를 입력하면, 권한 서버는 이 정보를 확인해 사용자의 신원을 인증합니다.
     - 권한 부여 : 사용자가 특정 클라이언트가 자신의 데이터를 접근할 수 있도록 허가를 부여하는 과정을 처리합니다. 예: "이 앱이 내 이메일 주소와 프로필 정보를 접근하도록 허용하시겠습니까?"
     - 액세스 토큰 발급 : 권한 서버는 사용자가 클라이언트에게 데이터를 접근할 수 있는 권한을 부여한 뒤, 클라이언트에게 액세스 토큰을 발급합니다. 이 토큰을 사용하여 클라이언트는 리소스 서버에서 데이터를 요청할 수 있습니다.
     - 토큰 관리 : 권한 서버는 발급한 액세스 토큰과 리프레시 토큰(Refresh Token)을 관리하고, 만료되거나 유효하지 않은 토큰을 거부합니다.
   
<br/>

- 리소스 서버(Resource Server): 리소스 서버는 보호되는 리소스를 호스팅하는 서버로, 액세스를 허용하거나 거부합니다. 이 서버는 OAuth 2.0 토큰을 사용하여 클라이언트에게 리소스에 액세스할 권한을 부여하고 실제 데이터를 제공합니다

---

## 4. OAuth 2.0 권한 부여 과정

![image](https://github.com/user-attachments/assets/b65e1b8d-2cd1-4913-af88-0b8263cd372c)

OAuth 2.0은 일반적으로 위와 같은 플로우를 많이 사용합니다. 
그래서 클라이언트와 서버측 모두 OAuth 2.0 플로우에 대해 숙지하고 있어야 합니다.


